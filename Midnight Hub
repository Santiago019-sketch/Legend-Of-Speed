-- Load Tokyo UI Library
local Library = loadstring(game:HttpGet('https://raw.githubusercontent.com/drillygzzly/Roblox-UI-Libs/main/1%20Tokyo%20Lib%20(FIXED)/Tokyo%20Lib%20Source.lua'))()

-- Create Window
local Window = Library:Window("Midnight Hub", "Speed of Legends", "#000000")

-- Create Tabs
local MainTab = Window:Tab("Main")
local AutoTab = Window:Tab("Auto Farm")
local MiscTab = Window:Tab("Misc")

-- Main Features
MainTab:Slider("WalkSpeed", 16, 500, 16, function(v)
    game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = v
end)

MainTab:Slider("JumpPower", 50, 500, 50, function(v)
    game.Players.LocalPlayer.Character.Humanoid.JumpPower = v
end)

-- Auto Farm Features
local function collectOrb(orbType, location)
    local args = {
        "collectOrb",
        orbType,
        location
    }
    game:GetService("ReplicatedStorage").rEvents.orbEvent:FireServer(unpack(args))
end

AutoTab:Toggle("Auto Collect All Orbs", false, function(t)
    getgenv().AutoCollectOrbs = t
    while wait(0.1) do
        if getgenv().AutoCollectOrbs then
            pcall(function()
                local orbTypes = {"Yellow Orb", "Orange Orb", "Red Orb", "Blue Orb"}
                local locations = {"City", "Desert", "Magma City"}
                
                for _, location in ipairs(locations) do
                    for _, orbType in ipairs(orbTypes) do
                        collectOrb(orbType, location)
                    end
                end
            end)
        end
    end
end)

AutoTab:Toggle("Auto Collect Gems", false, function(t)
    getgenv().AutoCollectGems = t
    spawn(function()
        while wait(0.1) do
            if getgenv().AutoCollectGems then
                pcall(function()
                    local locations = {"City", "Desert", "Magma City"}
                    for _, location in ipairs(locations) do
                        collectOrb("Gem", location)
                    end
                end)
            end
        end
    end)
end)

AutoTab:Toggle("Fast Hoops Farm", false, function(t)
    getgenv().FastHoopsFarm = t
    while wait() do
        if getgenv().FastHoopsFarm then
            pcall(function()
                for _, hoop in pairs(game:GetService("Workspace").Hoops:GetChildren()) do
                    hoop.CFrame = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
                end
            end)
        end
    end
end)

AutoTab:Toggle("Safe Hoops Farm", false, function(t)
    getgenv().SafeHoopsFarm = t
    spawn(function()
        while wait(0.3) do
            if getgenv().SafeHoopsFarm then
                pcall(function()
                    for _, hoop in pairs(game:GetService("Workspace").Hoops:GetChildren()) do
                        hoop.CFrame = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
                        wait(0.3)
                    end
                end)
            end
        end
    end)
end)

AutoTab:Toggle("Auto Rebirth", false, function(t)
    getgenv().AutoRebirth = t
    spawn(function()
        while wait(0.5) do
            if getgenv().AutoRebirth then
                pcall(function()
                    game:GetService("ReplicatedStorage").rEvents.rebirthEvent:FireServer("rebirthRequest")
                end)
            end
        end
    end)
end)

AutoTab:Button("Collect All Chests", function()
    local chestTypes = {
        {"groupRewards"},
        {"Enchanted Chest"},
        {workspace.rewardChests.rewardChest}
    }
    
    for _, chest in ipairs(chestTypes) do
        pcall(function()
            if chest[1] == "groupRewards" then
                game:GetService("ReplicatedStorage").rEvents.groupRemote:InvokeServer(unpack(chest))
            elseif chest[1] == "Enchanted Chest" then
                game:GetService("ReplicatedStorage").rEvents.checkChestRemote:InvokeServer(unpack(chest))
            else
                game:GetService("ReplicatedStorage").rEvents.collectCourseChestRemote:InvokeServer(unpack(chest))
            end
        end)
        wait(0.1)
    end
end)

-- Misc Features
MiscTab:Button("Join Discord", function()
    setclipboard("https://discord.gg/midnight-hub")
    local req = (syn and syn.request) or (http and http.request) or http_request
    if req then
        req({
            Url = 'http://127.0.0.1:6463/rpc?v=1',
            Method = 'POST',
            Headers = {
                ['Content-Type'] = 'application/json',
                Origin = 'https://discord.com'
            },
            Body = game:GetService('HttpService'):JSONEncode({
                cmd = 'INVITE_BROWSER',
                nonce = game:GetService('HttpService'):GenerateGUID(false),
                args = {code = 'midnight-hub'}
            })
        })
    end
end)

MiscTab:Button("Lead Developers: Midnight Dev Team", function()
    setclipboard("https://discord.gg/midnight-hub")
end)

MiscTab:Button("UI Designer: Midnight UI Team", function()
    setclipboard("https://discord.gg/midnight-hub")
end)

MiscTab:Button("Destroy GUI", function()
    Library:Destroy()
end)

MiscTab:Button("Rejoin Game", function()
    game:GetService("TeleportService"):Teleport(game.PlaceId, game:GetService("Players").LocalPlayer)
end)

-- Set Keybind
Library:Keybind("RightControl")
