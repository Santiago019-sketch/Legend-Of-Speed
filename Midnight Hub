local VLib = loadstring(game:HttpGet("https://gitlab.com/L1ZOT/test-project/-/raw/main/PJM-GUI"))()
local Win = VLib:Window("Midnight Hub", "Speed of Legends")
local Main = Win:Tab("Main")
local Autofarm = Win:Tab("Autofarm")
local Credits = Win:Tab("Credits")

-- GUI toggle setup
local guiVisible = true
local toggleKey = Enum.KeyCode.RightShift -- Change this key if needed

game:GetService("UserInputService").InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == toggleKey then
        guiVisible = not guiVisible
        Win.Frame.Visible = guiVisible
    end
end)

if not game.Workspace:FindFirstChild("MidnightHubPart") then
    local MidnightHubPart = Instance.new("Part")
    MidnightHubPart.Name = "MidnightHubPart"
    MidnightHubPart.Parent = game.Workspace
    MidnightHubPart.Anchored = true
    MidnightHubPart.Transparency = 0
    MidnightHubPart.Size = Vector3.new(30, -0.5, 30)
    MidnightHubPart.Position = Vector3.new(-543.452, 2873.2, 324.647)
end

Main:Slider("WalkSpeed", 0, 250, 16, function(v)
    game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = v
end)

Main:Slider("JumpPower", 0, 250, 50, function(v)
    game.Players.LocalPlayer.Character.Humanoid.JumpPower = v
end)

Autofarm:Toggle("Auto Steps", false, function(t)
    getgenv().Autostep = t
    while wait() do
        if getgenv().Autostep then
            pcall(function()
                for i = 1, 20 do
                    local orbs = {"Yellow Orb", "Orange Orb", "Red Orb", "Blue Orb"}
                    for _, orb in ipairs(orbs) do
                        local args = {"collectOrb", orb, "City"}
                        game:GetService("ReplicatedStorage").rEvents.orbEvent:FireServer(unpack(args))
                    end
                end
            end)
        end
    end
end)

Autofarm:Toggle("Auto collect gems", false, function(t)
    spawn(function()
        getgenv().AutocollectDiamonds = t
        while wait() do
            if getgenv().AutocollectDiamonds then
                pcall(function()
                    for i = 1, 10 do
                        local locations = {"City", "Desert", "Magma City"}
                        for _, location in ipairs(locations) do
                            local args = {"collectOrb", "Gem", location}
                            game:GetService("ReplicatedStorage").rEvents.orbEvent:FireServer(unpack(args))
                        end
                    end
                end)
            end
        end
    end)
end)

Autofarm:Toggle("Hops Farm", false, function(t)
    getgenv().Autohops = t
    while wait() do
        if getgenv().Autohops then
            for _, v in pairs(game:GetService("Workspace").Hoops:GetChildren()) do
                v.CFrame = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
            end
        end
    end
end)

Autofarm:Toggle("Safe Hops Farm", false, function(t)
    HoopsFarm = t
end)

spawn(function()
    while wait() do
        if HoopsFarm then
            pcall(function()
                for _, v in pairs(game:GetService("Workspace").Hoops:GetChildren()) do
                    v.CFrame = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
                    wait(0.3)
                end
            end)
        end
    end
end)

Autofarm:Toggle("AutoRebirth", false, function(t)
    spawn(function()
        getgenv().AutoRebirth = t
        while wait() do
            if getgenv().AutoRebirth then
                pcall(function()
                    local args = {"rebirthRequest"}
                    game:GetService("ReplicatedStorage").rEvents.rebirthEvent:FireServer(unpack(args))
                end)
            end
        end
    end)
end)

Autofarm:Button("Collect Chests", function()
    local args = {"groupRewards"}
    game:GetService("ReplicatedStorage").rEvents.groupRemote:InvokeServer(unpack(args))

    args = {"Enchanted Chest"}
    game:GetService("ReplicatedStorage").rEvents.checkChestRemote:InvokeServer(unpack(args))
    wait()

    args = {workspace.rewardChests.rewardChest}
    game:GetService("ReplicatedStorage").rEvents.collectCourseChestRemote:InvokeServer(unpack(args))
end)

Credits:Button("Lead Developers: Midnight Dev Team", function()
    setclipboard("https://discord.gg/midnight-hub")
end)

Credits:Button("UI Designer: Midnight UI Team", function()
    setclipboard("https://discord.gg/midnight-hub")
end)

Credits:Button("Midnight Hub Discord Server", function()
    setclipboard("https://discord.gg/midnight-hub")
    local req = (syn and syn.request) or (http and http.request) or http_request
    if req then
        req({
            Url = 'http://127.0.0.1:6463/rpc?v=1',
            Method = 'POST',
            Headers = {
                ['Content-Type'] = 'application/json',
                Origin = 'https://discord.com'
            },
            Body = game:GetService('HttpService'):JSONEncode({
                cmd = 'INVITE_BROWSER',
                nonce = game:GetService('HttpService'):GenerateGUID(false),
                args = {code = 'midnight-hub'}
            })
        })
    end
end)

Credits:line()
Credits:Button("Destroy Gui", function()
    game.CoreGui:FindFirstChild("woof"):Destroy()
end)

Credits:Button("Rejoin", function()
    local ts = game:GetService("TeleportService")
    local p = game:GetService("Players").LocalPlayer
    ts:Teleport(game.PlaceId, p)
end)
