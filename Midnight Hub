-- Load Rayfield Library
local Rayfield = loadstring(game:HttpGet("https://raw.githubusercontent.com/shlexware/Rayfield/main/source"))()
if not Rayfield then
    warn("Failed to load Rayfield Library.")
    return
end

-- Create the GUI window
local Window = Rayfield:CreateWindow({
    Name = "Farming GUI",
    LoadingTitle = "Loading Farming GUI",
    LoadingSubtitle = "By YourNameHere",
    ConfigurationSaving = {
        Enabled = true, -- Set to true if you want to save configuration
    },
    KeySystem = false, -- Set to true if you want to implement a key system
})

-- Farming Tab
local MainTab = Window:CreateTab("Farming", 4483362458) -- Icon ID from Roblox library

-- Farming Section
local FarmingSection = MainTab:CreateSection("Orb Farming")

-- Variables to track toggle states
local YellowOrbEnabled = false
local RedOrbEnabled = false

-- Function to handle farming orbs
local function farmOrbs(orbType, location, count)
    for i = 1, count do
        local success, err = pcall(function()
            game:GetService('ReplicatedStorage').rEvents.orbEvent:FireServer("collectOrb", orbType, location)
        end)
        if not success then
            warn("Error firing event for " .. orbType .. ": " .. err)
        end
        wait(0.3) -- Add a short wait to prevent spamming requests
    end
end

-- Yellow Orb Farm Toggle
FarmingSection:CreateToggle({
    Name = "Yellow Orb Farm",
    CurrentValue = false,
    Flag = "YellowOrbFarm", -- Used for saving toggle state
    Callback = function(state)
        YellowOrbEnabled = state
        spawn(function()
            while YellowOrbEnabled do
                farmOrbs("Yellow Orb", "City", 15)
            end
        end)
    end,
})

-- Red Desert Orb Farm Toggle
FarmingSection:CreateToggle({
    Name = "Red Desert Orb Farm",
    CurrentValue = false,
    Flag = "RedOrbFarm",
    Callback = function(state)
        RedOrbEnabled = state
        spawn(function()
            while RedOrbEnabled do
                farmOrbs("Red Orb", "Desert", 7)
            end
        end)
    end,
})

-- Steps Farm Button
FarmingSection:CreateButton({
    Name = "Farm Steps (7500x)",
    Callback = function()
        farmOrbs("Red Orb", "City", 7500)
    end,
})

-- Gems Farm Button
FarmingSection:CreateButton({
    Name = "Farm Gems (1000x)",
    Callback = function()
        farmOrbs("Gem", "City", 1000)
    end,
})
